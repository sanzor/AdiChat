/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./ui/ts/Channels.ts":
/*!***************************!*\
  !*** ./ui/ts/Channels.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar elements_1 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nvar elements_2 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\nvar CHANNELS = \"channels\";\nvar TOPIC_ID = \"topicId\";\n(0, bus_1.subscribeToEvent)(events_1.SUBSCRIBE_COMMAND_RESULT_U, onSubscribeResultU);\n(0, bus_1.subscribeToEvent)(events_1.UNSUBSCRIBE_COMMAND_RESULT_U, onUnSubscribeResultU);\n(0, bus_1.subscribeToEvent)(events_1.REFRESH_CHANNELS_COMMAND_RESULT, onRefreshChannelsCommandResult);\n(0, bus_1.subscribeToEvent)(events_1.NEW_INCOMING_MESSAGE, onNewIncomingMessage);\n(0, bus_1.subscribeToEvent)(events_1.UNSUBSCRIBE_BUTTON_CLICK, onUnsubscribeAsync);\n(0, bus_1.subscribeToEvent)(events_1.CHANNEL_CLICK, onChannelClick);\nfunction onNewIncomingMessage(ev) {\n    var message = ev.detail;\n    var currentChannel = (0, utils_1.getItemFromStorage)(constants_1.CURRENT_CHANNEL);\n    if (currentChannel == null) {\n        return;\n    }\n    updateChannelsOnMessage(message);\n}\nfunction updateChannelsOnMessage(data) {\n    var targetChannel = Array.from(elements_1.channelsContainer.children)\n        .filter(function (child) { return child.innerText == data.topicId.toString(); });\n}\nelements_2.subscribeBtn.addEventListener(\"click\", onSubscribeAsync);\nfunction onChannelClick(event) {\n    var channel = event.detail;\n    (0, utils_1.setItemInStorage)(constants_1.CURRENT_CHANNEL, channel);\n    (0, bus_1.publishEvent)(events_1.SET_CHAT, channel);\n}\nfunction onRefreshChannelsCommandResult(ev) {\n    var channels = ev.detail;\n    if (channels.length == 0 || !channels) {\n        (0, bus_1.publishEvent)(events_1.SET_CHANNELS, []);\n        return;\n    }\n    (0, utils_1.setItemInStorage)(CHANNELS, channels);\n    (0, bus_1.publishEvent)(events_1.SET_CHANNELS, channels);\n    var currentChannel = (0, utils_1.getItemFromStorage)(constants_1.CURRENT_CHANNEL);\n    if (currentChannel == null || !channels.find(function (x) { return x.id == currentChannel.id; })) {\n        (0, utils_1.setItemInStorage)(constants_1.CURRENT_CHANNEL, channels[0]);\n        (0, bus_1.publishEvent)(events_1.SET_CHAT, channels[0]);\n        return;\n    }\n    (0, bus_1.publishEvent)(events_1.SET_CHAT, currentChannel);\n}\nfunction onSubscribeAsync() {\n    return __awaiter(this, void 0, void 0, function () {\n        function onOwnSubscribeResult(ev, resolve, _) {\n            (0, bus_1.unsubscribeFromEvent)(events_1.SUBSCRIBE_COMMAND_RESULT, function (_) {\n                console.log(\"unsubscribed from subscribe_result\");\n            });\n            resolve(ev.detail);\n        }\n        var subscribeResult, _;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, new Promise(function (resolve, reject) {\n                        console.log(constants_1.KIND);\n                        (0, bus_1.subscribeToEvent)(events_1.SUBSCRIBE_COMMAND_RESULT, function (ev) { return onOwnSubscribeResult(ev, resolve, reject); });\n                        (0, bus_1.publishCommand)({ kind: \"subscribe\", topic: elements_2.subscribeBox.value });\n                    })];\n                case 1:\n                    subscribeResult = _a.sent();\n                    return [4 /*yield*/, handleSubscribeResultAsync(subscribeResult)];\n                case 2:\n                    _ = _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nvar state = {\n    first_chat_set: false\n};\nfunction handleSubscribeResultAsync(subscribeResult) {\n    return __awaiter(this, void 0, void 0, function () {\n        var message, targetChannel, existingChannels, newChannelList, currentChannel;\n        return __generator(this, function (_a) {\n            console.log(subscribeResult.result);\n            if (subscribeResult.result != \"ok\" && subscribeResult.result != \"already_subscribed\") {\n                message = \"Could not subscribe to channel:\" + elements_2.subscribeBox.value;\n                console.log(message);\n                return [2 /*return*/, new Error(message)];\n            }\n            if (subscribeResult.result == 'already_subscribed') {\n                console.log(\"already subscribed\");\n                return [2 /*return*/];\n            }\n            targetChannel = subscribeResult.topic;\n            existingChannels = (0, utils_1.getItemFromStorage)(CHANNELS);\n            if (!existingChannels) {\n                (0, utils_1.setItemInStorage)(constants_1.CURRENT_CHANNEL, targetChannel);\n                (0, bus_1.publishEvent)(events_1.SET_CHAT, targetChannel);\n                (0, utils_1.setItemInStorage)(CHANNELS, [targetChannel]);\n                (0, bus_1.publishEvent)(events_1.ADD_CHANNEL, targetChannel);\n                return [2 /*return*/];\n            }\n            newChannelList = __spreadArray(__spreadArray([], existingChannels, true), [targetChannel], false);\n            currentChannel = (0, utils_1.getItemFromStorage)(constants_1.CURRENT_CHANNEL);\n            console.log(currentChannel);\n            if (currentChannel == null || !existingChannels.find(function (x) { return x.id != (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.id); })) {\n                (0, utils_1.setItemInStorage)(constants_1.CURRENT_CHANNEL, targetChannel);\n                (0, utils_1.setItemInStorage)(CHANNELS, newChannelList);\n                (0, bus_1.publishEvent)(events_1.SET_CHAT, targetChannel);\n                (0, bus_1.publishEvent)(events_1.ADD_CHANNEL, targetChannel);\n                return [2 /*return*/];\n            }\n            (0, utils_1.setItemInStorage)(CHANNELS, newChannelList);\n            (0, bus_1.publishEvent)(events_1.ADD_CHANNEL, targetChannel);\n            if (state.first_chat_set == false) {\n                state.first_chat_set = true;\n                (0, bus_1.publishEvent)(events_1.SET_CHAT, targetChannel);\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nfunction onUnsubscribeAsync(event) {\n    return __awaiter(this, void 0, void 0, function () {\n        var channel, unsubscribeResult, _;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    channel = event.detail;\n                    return [4 /*yield*/, new Promise(function (resolve, _) {\n                            var _a;\n                            (0, bus_1.subscribeToEvent)(events_1.UNSUBSCRIBE_COMMAND_RESULT, function (ev) {\n                                (0, bus_1.unsubscribeFromEvent)(events_1.REFRESH_CHANNELS_COMMAND_RESULT, function (_) {\n                                    console.log(\"unsbuscribed from refresh_channels after unsubscribe from channel\");\n                                });\n                                resolve(ev.detail);\n                            });\n                            (0, bus_1.publishEvent)(constants_1.SOCKET_COMMAND, (_a = {}, _a[constants_1.KIND] = events_1.UNSUBSCRIBE_COMMAND, _a[\"topicId\"] = channel.id, _a));\n                        })];\n                case 1:\n                    unsubscribeResult = _a.sent();\n                    return [4 /*yield*/, handleUnsubscribeResultAsync(unsubscribeResult)];\n                case 2:\n                    _ = _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction handleUnsubscribeResultAsync(unsubscribeResult) {\n    return __awaiter(this, void 0, void 0, function () {\n        var message, existingChannels, currentChannel, newExistingChannels;\n        var _a;\n        return __generator(this, function (_b) {\n            console.log(unsubscribeResult);\n            if (unsubscribeResult.result == \"not_joined\") {\n                console.log(\"Not joined\");\n                return [2 /*return*/, \"not_joined\"];\n            }\n            if (unsubscribeResult.result != \"ok\") {\n                message = \"Could not unsubscribe from channel\";\n                return [2 /*return*/, new Error(message)];\n            }\n            existingChannels = (0, utils_1.getItemFromStorage)(CHANNELS);\n            if (!existingChannels) {\n                (0, utils_1.setItemInStorage)(constants_1.CURRENT_CHANNEL, null);\n                (0, utils_1.setItemInStorage)(CHANNELS, []);\n                (0, bus_1.publishEvent)(events_1.RESET_CHAT, {});\n                return [2 /*return*/];\n            }\n            if (existingChannels.length == 0) {\n                (0, utils_1.setItemInStorage)(constants_1.CURRENT_CHANNEL, null);\n                (0, bus_1.publishEvent)(events_1.RESET_CHAT, {});\n                return [2 /*return*/];\n            }\n            currentChannel = (0, utils_1.getItemFromStorage)(constants_1.CURRENT_CHANNEL);\n            newExistingChannels = existingChannels.filter(function (x) { return x.id != unsubscribeResult.topicId; });\n            (0, utils_1.setItemInStorage)(CHANNELS, newExistingChannels);\n            (0, bus_1.publishEvent)(events_1.REMOVE_CHANNEL, (_a = {}, _a[TOPIC_ID] = unsubscribeResult.topicId, _a));\n            console.log(unsubscribeResult);\n            if (unsubscribeResult.topicId == (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.id) && newExistingChannels && newExistingChannels.length > 0) {\n                console.log(newExistingChannels);\n                console.log(\"inside last if\");\n                (0, utils_1.setItemInStorage)(constants_1.CURRENT_CHANNEL, newExistingChannels[0]);\n                (0, bus_1.publishEvent)(events_1.SET_CHAT, newExistingChannels[0]);\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nfunction setChannels(channels) {\n    (0, utils_1.setItemInStorage)(CHANNELS, channels);\n    //updateChannelsContainer(channels);\n    return channels;\n}\nfunction onSubscribeResultU(ev) {\n    var channels = setChannels(ev.detail.subscriptions);\n    if (channels.length == 0) {\n        (0, bus_1.publishEvent)(events_1.RESET_CHAT, channels[0]);\n        return;\n    }\n}\nfunction onUnSubscribeResultU(ev) {\n    var channels = setChannels(ev.detail.subscriptions);\n    if (channels.length == 0) {\n        (0, bus_1.publishEvent)(events_1.RESET_CHAT, {});\n        return;\n    }\n    (0, bus_1.publishEvent)(events_1.SET_CHAT, channels.slice(-1));\n}\n\n\n//# sourceURL=webpack:///./ui/ts/Channels.ts?");

/***/ }),

/***/ "./ui/ts/Chat.ts":
/*!***********************!*\
  !*** ./ui/ts/Chat.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\nvar elements_1 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nelements_1.loadOlderMessagesBtn === null || elements_1.loadOlderMessagesBtn === void 0 ? void 0 : elements_1.loadOlderMessagesBtn.addEventListener(\"click\", onLoadOlderMessages);\n(0, bus_1.subscribeToEvent)(events_1.SET_CHAT, onSetChat);\n(0, bus_1.subscribeToEvent)(events_1.RESET_CHAT, onResetChat);\n(0, bus_1.subscribeToEvent)(\"get_messages_result\", onGetMessagesResult);\n(0, bus_1.subscribeToEvent)(events_1.SELF_PUBLISH_MESSAGE, onSelfPublish);\nfunction onResetChat(_) {\n    (0, bus_1.publishEvent)(events_1.RESET_CHAT_DOM, {});\n}\nfunction onSelfPublish(ev) {\n    console.log(\"Inside send message\");\n    var currentChannel = (0, utils_1.getItemFromStorage)(constants_1.CURRENT_CHANNEL);\n    var user = (0, utils_1.getItemFromStorage)(constants_1.USER);\n    console.log(\"Channel publish:\" + currentChannel);\n    var message = {\n        kind: events_1.PUBLISH_MESSAGE,\n        userId: user === null || user === void 0 ? void 0 : user.id,\n        topicId: Number.parseInt(currentChannel.id),\n        message: elements_1.chatSendMessageBox.value\n    };\n    (0, bus_1.publishCommand)(message);\n}\nfunction onSetChat(ev) {\n    console.log(ev.detail);\n    console.log(ev.detail.name);\n    setChatWithChannel(ev.detail);\n    (0, bus_1.publishEvent)(events_1.SET_CHAT_DOM, ev.detail);\n}\nfunction setChatWithChannel(channel) {\n}\nfunction onLoadOlderMessages(ev) {\n    // var count=Array.length(chatMessageContainer.children);\n    // var eventPayload=get_older_messages(currentChannel.id,count,CHANNEL_MESSAGES_COUNT);\n    // publishEvent(SOCKET_COMMAND,eventPayload);\n}\nfunction onGetMessagesResult(ev) {\n}\nfunction get_older_messages(id, startIndex, count) {\n    var message = {\n        kind: \"get-oldest-channel-messages\",\n        topicId: id,\n        count: count,\n        startIndex: startIndex\n    };\n    return message;\n}\nfunction get_newest_messages(id, count) {\n    var message = {\n        kind: \"get-newest-channel-messages\",\n        id: id,\n        count: count,\n    };\n    return message;\n}\n\n\n//# sourceURL=webpack:///./ui/ts/Chat.ts?");

/***/ }),

/***/ "./ui/ts/app.ts":
/*!**********************!*\
  !*** ./ui/ts/app.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n__webpack_require__(/*! ./sockReceive */ \"./ui/ts/sockReceive.ts\");\n__webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\n__webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\n__webpack_require__(/*! ./config */ \"./ui/ts/config.ts\");\n__webpack_require__(/*! ./sock */ \"./ui/ts/sock.ts\");\n__webpack_require__(/*! ./message */ \"./ui/ts/message.ts\");\n__webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\n__webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\n__webpack_require__(/*! ./main */ \"./ui/ts/main.ts\");\n__webpack_require__(/*! ./Channels */ \"./ui/ts/Channels.ts\");\n__webpack_require__(/*! ./channelsDOM */ \"./ui/ts/channelsDOM.ts\");\n__webpack_require__(/*! ./login */ \"./ui/ts/login.ts\");\n__webpack_require__(/*! ./Chat */ \"./ui/ts/Chat.ts\");\n__webpack_require__(/*! ./chatDOM */ \"./ui/ts/chatDOM.ts\");\n__webpack_require__(/*! ./register */ \"./ui/ts/register.ts\");\n\n\n//# sourceURL=webpack:///./ui/ts/app.ts?");

/***/ }),

/***/ "./ui/ts/bus.ts":
/*!**********************!*\
  !*** ./ui/ts/bus.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.publishCommand = exports.unsubscribeFromEvent = exports.subscribeToEvent = exports.publishEvent = void 0;\nvar eventBus = new EventTarget();\nfunction publishCommand(command) {\n    var customEvent = new CustomEvent(command.kind, { \"detail\": command });\n    return eventBus.dispatchEvent(customEvent);\n}\nexports.publishCommand = publishCommand;\nfunction publishEvent(eventName, eventData) {\n    var customEvent = new CustomEvent(eventName, { \"detail\": eventData });\n    return eventBus.dispatchEvent(customEvent);\n}\nexports.publishEvent = publishEvent;\nfunction subscribeToEvent(eventName, callback) {\n    eventBus.addEventListener(eventName, callback);\n}\nexports.subscribeToEvent = subscribeToEvent;\nfunction unsubscribeFromEvent(eventName, callback) {\n    eventBus.removeEventListener(eventName, callback);\n}\nexports.unsubscribeFromEvent = unsubscribeFromEvent;\n\n\n//# sourceURL=webpack:///./ui/ts/bus.ts?");

/***/ }),

/***/ "./ui/ts/channelsDOM.ts":
/*!******************************!*\
  !*** ./ui/ts/channelsDOM.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\nvar elements_1 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\n(0, bus_1.subscribeToEvent)(events_1.REMOVE_CHANNEL, onRemoveChannelFromDOM);\n(0, bus_1.subscribeToEvent)(events_1.ADD_CHANNEL, onAddChannelToDOM);\n(0, bus_1.subscribeToEvent)(events_1.SET_CHANNELS, onSetDOMChannels);\n(0, bus_1.subscribeToEvent)(events_1.NEW_INCOMING_MESSAGE, onNewMessageOnChannel);\nfunction getChannelDomElementById(topicId) {\n    var childrenArray = Array.from(elements_1.channelsContainer.children);\n    var elem = childrenArray.find(function (x) {\n        var channelId = parseInt(x.getAttribute('CHANNEL_ID'));\n        return channelId === topicId;\n    });\n    return elem;\n}\nfunction onSetDOMChannels(ev) {\n    var channels = ev.detail;\n    setChannelsContainer(channels);\n}\nfunction onNewMessageOnChannel(ev) {\n    var message = ev.detail;\n    var channelElement = getChannelDomElementById(ev.detail.topicId);\n}\nfunction onAddChannelToDOM(ev) {\n    var channel = ev.detail;\n    var newChannel = createChannelContainer(channel);\n    elements_1.channelsContainer.appendChild(newChannel);\n}\nfunction onRemoveChannelFromDOM(ev) {\n    var channelElement = getChannelDomElementById(ev.detail.topicId);\n    if (channelElement != null) {\n        elements_1.channelsContainer.removeChild(channelElement);\n    }\n}\nfunction resetChannels() {\n    elements_1.channelsContainer.innerHTML = '';\n}\nfunction setChannelsContainer(channels) {\n    console.log(channels);\n    resetChannels();\n    var headerRow = document.createElement(\"tr\");\n    var h1 = document.createElement(\"th\");\n    var h2 = document.createElement(\"th\");\n    headerRow.appendChild(h1);\n    headerRow.appendChild(h2);\n    if (channels === 'no_channels') {\n        return elements_1.channelsContainer;\n    }\n    var channelContainers = createChannelContainers(channels);\n    channelContainers.forEach(function (element) {\n        elements_1.channelsContainer.appendChild(element);\n    });\n    return elements_1.channelsContainer;\n}\nfunction createChannelContainers(channels) {\n    console.log(channels);\n    var items = channels.map(createChannelContainer);\n    return items;\n}\nfunction createChannelContainer(channel) {\n    var channelContainer = document.createElement(\"span\");\n    channelContainer.setAttribute(constants_1.CHANNEL_ID, channel.id);\n    channelContainer.setAttribute(\"class\", \"channelRow\");\n    channelContainer.setAttribute(\"channelData\", JSON.stringify(channel));\n    var unsubscribeBtn = createUnsubscribeChannelButton(channel);\n    var openChatButton = createDisplayChannelChatButton(channel);\n    var newMessagesBox = createNewMessagesBox(channel);\n    channelContainer.appendChild(newMessagesBox);\n    channelContainer.appendChild(unsubscribeBtn);\n    channelContainer.appendChild(openChatButton);\n    return channelContainer;\n}\nfunction createUnsubscribeChannelButton(channel) {\n    var unsubscribeBtn = document.createElement(\"button\");\n    unsubscribeBtn.id = channel.id + '_unsubscribe_btn';\n    unsubscribeBtn.innerText = \"X\";\n    unsubscribeBtn.setAttribute(\"class\", \"channelRowUnsubscribeBtn\");\n    unsubscribeBtn.setAttribute(constants_1.CHANNEL, JSON.stringify(channel));\n    unsubscribeBtn.onclick = function () {\n        (0, bus_1.publishEvent)(events_1.UNSUBSCRIBE_BUTTON_CLICK, channel);\n    };\n    return unsubscribeBtn;\n}\nfunction createDisplayChannelChatButton(channel) {\n    var channelButton = document.createElement(\"button\");\n    channelButton.id = channel.id;\n    channelButton.setAttribute('content', channel.name);\n    channelButton.setAttribute(\"class\", 'button');\n    channelButton.setAttribute(\"style\", \"channelButton\");\n    channelButton.textContent = channel.name;\n    channelButton.onclick = function (_) { (0, bus_1.publishEvent)(events_1.CHANNEL_CLICK, channel); };\n    return channelButton;\n}\nfunction createNewMessagesBox(channel) {\n    var newMessagesBox = document.createElement(\"p\");\n    newMessagesBox.setAttribute(\"class\", \"newMessagesBox\");\n    newMessagesBox.innerHTML = \"0\";\n    return newMessagesBox;\n}\n\n\n//# sourceURL=webpack:///./ui/ts/channelsDOM.ts?");

/***/ }),

/***/ "./ui/ts/chatDOM.ts":
/*!**************************!*\
  !*** ./ui/ts/chatDOM.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\nvar elements_1 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nvar APPEND_MESSAGE_DOM = \"append_message\";\n(0, bus_1.subscribeToEvent)(APPEND_MESSAGE_DOM, onAppendedMessage);\n(0, bus_1.subscribeToEvent)(events_1.RESET_CHAT_DOM, onResetChat);\n(0, bus_1.subscribeToEvent)(events_1.SET_CHAT_DOM, onSetChat);\nelements_1.chatSendMessageBtn.addEventListener(\"click\", onSendMessage);\nfunction onSetChat(ev) {\n    console.log(ev.detail);\n    var channel = ev.detail;\n    console.log(\"On set chat dom\");\n    console.log(channel.name);\n    elements_1.currentChannel.innerText = ev.detail.name;\n}\nfunction onSendMessage(_) {\n    var message = elements_1.chatSendMessageBox.value;\n    var user = (0, utils_1.getItemFromStorage)(\"user\");\n    var channel = (0, utils_1.getItemFromStorage)(constants_1.CURRENT_CHANNEL);\n    var appendMessage = {\n        user: user,\n        topic: channel,\n        message: message\n    };\n    console.log(appendMessage);\n    (0, bus_1.publishEvent)(APPEND_MESSAGE_DOM, appendMessage);\n    (0, bus_1.publishEvent)(events_1.SELF_PUBLISH_MESSAGE, message);\n}\nfunction onAppendedMessage(ev) {\n    var message = ev.detail;\n    console.log(\"Inside on new message\");\n    var messageElement = createChatMessageContainer(message);\n    elements_1.chatContainer.appendChild(messageElement);\n}\nfunction onResetChat(_) {\n    localStorage.removeItem(\"currentChannelId\");\n    elements_1.chatContainer.innerHTML = '';\n    elements_1.currentChannel.innerText = '';\n}\nfunction clearChatMessageBox() {\n    elements_1.chatSendMessageBox.value = \"\";\n}\nfunction createChatMessageContainer(data) {\n    var user = data.user;\n    var topic = data.topic;\n    var message = data.message;\n    var chatMessageContainer = document.createElement(\"div\");\n    chatMessageContainer.setAttribute(\"class\", \"chatMessageContainer\");\n    var icon = document.createElement(\"img\");\n    var content = document.createElement(\"div\");\n    content.classList.add(\"chatMessageContent\");\n    var meta = document.createElement(\"div\");\n    var status = document.createElement(\"div\");\n    meta.setAttribute(\"class\", \"chatMessageMeta\");\n    meta.innerText = JSON.stringify(user);\n    icon.setAttribute(\"class\", \"chatMessageIcon\");\n    content.setAttribute(\"class\", \"chatMessageContent\");\n    content.innerText = message;\n    status.setAttribute(\"class\", \"chatMessageStatusPending\");\n    status.innerText = \"tick\";\n    chatMessageContainer.appendChild(icon);\n    chatMessageContainer.appendChild(meta);\n    chatMessageContainer.appendChild(content);\n    chatMessageContainer.appendChild(status);\n    return chatMessageContainer;\n}\n\n\n//# sourceURL=webpack:///./ui/ts/chatDOM.ts?");

/***/ }),

/***/ "./ui/ts/config.ts":
/*!*************************!*\
  !*** ./ui/ts/config.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar config = {\n    baseHttpUrl: \"http://localhost:8080\",\n    baseWsUrl: \"ws://localhost:8080\"\n};\nexports[\"default\"] = config;\n\n\n//# sourceURL=webpack:///./ui/ts/config.ts?");

/***/ }),

/***/ "./ui/ts/constants.ts":
/*!****************************!*\
  !*** ./ui/ts/constants.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.MESSAGE_CONTENT = exports.CHANNEL_ID = exports.UNSUBSCRIBE_BUTTON_COMMAND = exports.USER = exports.ID = exports.CURRENT_CHANNEL = exports.SOCKET_COMMAND = exports.KIND = exports.TOPIC = exports.CHANNEL = void 0;\nvar CHANNEL = \"channel\";\nexports.CHANNEL = CHANNEL;\nvar CURRENT_CHANNEL = \"current_channel\";\nexports.CURRENT_CHANNEL = CURRENT_CHANNEL;\nvar MESSAGE_CONTENT = \"content\";\nexports.MESSAGE_CONTENT = MESSAGE_CONTENT;\nvar TOPIC = \"topic\";\nexports.TOPIC = TOPIC;\nvar KIND = \"kind\";\nexports.KIND = KIND;\nvar SOCKET_COMMAND = \"socket_command\";\nexports.SOCKET_COMMAND = SOCKET_COMMAND;\nvar ID = \"id\";\nexports.ID = ID;\nvar USER = \"user\";\nexports.USER = USER;\nvar UNSUBSCRIBE_BUTTON_COMMAND = \"unsubscribe_button_command\";\nexports.UNSUBSCRIBE_BUTTON_COMMAND = UNSUBSCRIBE_BUTTON_COMMAND;\nvar CHANNEL_ID = \"channelId\";\nexports.CHANNEL_ID = CHANNEL_ID;\n\n\n//# sourceURL=webpack:///./ui/ts/constants.ts?");

/***/ }),

/***/ "./ui/ts/elements.ts":
/*!***************************!*\
  !*** ./ui/ts/elements.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.loadOlderMessagesBtn = exports.subscribeBox = exports.subscribeBtn = exports.channelsContainer = exports.retypePasswordBox = exports.usernameBox = exports.passwordBox = exports.emailBox = exports.loginFailMessage = exports.passwordLoginBox = exports.emailLoginBox = exports.loginModal = exports.registerFailMessage = exports.registerModal = exports.submitBtn = exports.backToLoginBtn = exports.registerBtn = exports.loginButton = exports.currentChannel = exports.chatSendMessageBox = exports.chatSendMessageBtn = exports.chatContainer = void 0;\nvar chatContainer = document.getElementById(\"messagesContainer\");\nexports.chatContainer = chatContainer;\nvar chatSendMessageBtn = document.getElementById(\"chatSendMessageBtn\");\nexports.chatSendMessageBtn = chatSendMessageBtn;\nvar chatSendMessageBox = document.getElementById(\"chatSendMessageBox\");\nexports.chatSendMessageBox = chatSendMessageBox;\nvar currentChannel = document.getElementById(\"currentChannelNameLabel\");\nexports.currentChannel = currentChannel;\nvar loginButton = document.getElementById(\"loginBtn\");\nexports.loginButton = loginButton;\nvar registerBtn = document.getElementById(\"registerBtn\");\nexports.registerBtn = registerBtn;\nvar backToLoginBtn = document.getElementById(\"backToLoginBtn\");\nexports.backToLoginBtn = backToLoginBtn;\nvar submitBtn = document.getElementById(\"submitBtn\");\nexports.submitBtn = submitBtn;\nvar registerModal = document.getElementById(\"registerModal\");\nexports.registerModal = registerModal;\nvar registerFailMessage = document.getElementById(\"registerFailMessage\");\nexports.registerFailMessage = registerFailMessage;\nvar loginModal = document.getElementById(\"loginModal\");\nexports.loginModal = loginModal;\nvar emailLoginBox = document.getElementById(\"emailLoginBox\");\nexports.emailLoginBox = emailLoginBox;\nvar passwordLoginBox = document.getElementById(\"passwordLoginBox\");\nexports.passwordLoginBox = passwordLoginBox;\nvar loginFailMessage = document.getElementById(\"loginFailMessage\");\nexports.loginFailMessage = loginFailMessage;\nvar emailBox = document.getElementById(\"emailBox\");\nexports.emailBox = emailBox;\nvar passwordBox = document.getElementById(\"passwordBox\");\nexports.passwordBox = passwordBox;\nvar usernameBox = document.getElementById(\"usernameBox\");\nexports.usernameBox = usernameBox;\nvar retypePasswordBox = document.getElementById(\"retypePasswordBox\");\nexports.retypePasswordBox = retypePasswordBox;\nvar channelsContainer = document.getElementById(\"channelsContainer\");\nexports.channelsContainer = channelsContainer;\nvar subscribeBtn = document.getElementById(\"subscribeBtn\");\nexports.subscribeBtn = subscribeBtn;\nvar subscribeBox = document.getElementById(\"subscribeBox\");\nexports.subscribeBox = subscribeBox;\nvar loadOlderMessagesBtn = document.getElementById(\"loadOlderMessagesBtn\");\nexports.loadOlderMessagesBtn = loadOlderMessagesBtn;\n\n\n//# sourceURL=webpack:///./ui/ts/elements.ts?");

/***/ }),

/***/ "./ui/ts/events.ts":
/*!*************************!*\
  !*** ./ui/ts/events.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.HIDE_REGISTER = exports.SHOW_REGISTER = exports.HIDE_LOGIN = exports.SHOW_LOGIN = exports.HIDE_MAIN = exports.SHOW_MAIN = exports.GET_NEWEST_MESSAGES = exports.GET_OLDER_MESSAGES = exports.SELF_PUBLISH_MESSAGE = exports.PUBLISH_MESSAGE = exports.NEW_INCOMING_MESSAGE = exports.RESET_CHAT_DOM = exports.RESET_CHAT = exports.SET_CHAT_DOM = exports.SET_CHAT = exports.SOCKET_CLOSED = exports.SOCKET_RECEIVE = exports.SUBSCRIBE_COMMAND_RESULT_U = exports.SUBSCRIBE_COMMAND_RESULT = exports.SUBSCRIBE_COMMAND = exports.UNSUBSCRIBE_COMMAND_RESULT_U = exports.UNSUBSCRIBE_COMMAND_RESULT = exports.UNSUBSCRIBE_COMMAND = exports.UNSUBSCRIBE_BUTTON_CLICK = exports.CHANNEL_CLICK = exports.REMOVE_CHANNEL = exports.ADD_CHANNEL = exports.SET_CHANNELS = exports.REFRESH_CHANNELS_COMMAND_RESULT = exports.REFRESH_CHANNELS_COMMAND = void 0;\n//socket commands\nvar REFRESH_CHANNELS_COMMAND = \"get_subscriptions\";\nexports.REFRESH_CHANNELS_COMMAND = REFRESH_CHANNELS_COMMAND;\nvar SUBSCRIBE_COMMAND = \"subscribe\";\nexports.SUBSCRIBE_COMMAND = SUBSCRIBE_COMMAND;\nvar UNSUBSCRIBE_COMMAND = \"unsubscribe\";\nexports.UNSUBSCRIBE_COMMAND = UNSUBSCRIBE_COMMAND;\nvar PUBLISH_MESSAGE = \"publish\";\nexports.PUBLISH_MESSAGE = PUBLISH_MESSAGE;\nvar SELF_PUBLISH_MESSAGE = \"self_publish\";\nexports.SELF_PUBLISH_MESSAGE = SELF_PUBLISH_MESSAGE;\nvar GET_OLDER_MESSAGES = \"get_older_messages\";\nexports.GET_OLDER_MESSAGES = GET_OLDER_MESSAGES;\nvar GET_NEWEST_MESSAGES = \"get_newest_messages\";\nexports.GET_NEWEST_MESSAGES = GET_NEWEST_MESSAGES;\n//socket command results\nvar REFRESH_CHANNELS_COMMAND_RESULT = \"get_subscriptions_result\";\nexports.REFRESH_CHANNELS_COMMAND_RESULT = REFRESH_CHANNELS_COMMAND_RESULT;\nvar UNSUBSCRIBE_BUTTON_CLICK = \"unsubscribe_button_click\";\nexports.UNSUBSCRIBE_BUTTON_CLICK = UNSUBSCRIBE_BUTTON_CLICK;\nvar CHANNEL_CLICK = \"channel_click\";\nexports.CHANNEL_CLICK = CHANNEL_CLICK;\nvar UNSUBSCRIBE_COMMAND_RESULT = \"unsubscribe_result\";\nexports.UNSUBSCRIBE_COMMAND_RESULT = UNSUBSCRIBE_COMMAND_RESULT;\nvar UNSUBSCRIBE_COMMAND_RESULT_U = \"unsubscribe_result_u\";\nexports.UNSUBSCRIBE_COMMAND_RESULT_U = UNSUBSCRIBE_COMMAND_RESULT_U;\nvar SUBSCRIBE_COMMAND_RESULT = \"subscribe_result\";\nexports.SUBSCRIBE_COMMAND_RESULT = SUBSCRIBE_COMMAND_RESULT;\nvar SUBSCRIBE_COMMAND_RESULT_U = \"subscribe_result_u\";\nexports.SUBSCRIBE_COMMAND_RESULT_U = SUBSCRIBE_COMMAND_RESULT_U;\nvar SOCKET_RECEIVE = \"socketReceive\";\nexports.SOCKET_RECEIVE = SOCKET_RECEIVE;\nvar SOCKET_CLOSED = \"socketClosed\";\nexports.SOCKET_CLOSED = SOCKET_CLOSED;\nvar NEW_INCOMING_MESSAGE = \"new_channel_message\";\nexports.NEW_INCOMING_MESSAGE = NEW_INCOMING_MESSAGE;\nvar SET_CHAT = \"set_chat\";\nexports.SET_CHAT = SET_CHAT;\nvar SET_CHAT_DOM = \"set_chat_dom\";\nexports.SET_CHAT_DOM = SET_CHAT_DOM;\nvar RESET_CHAT = \"reset_chat\";\nexports.RESET_CHAT = RESET_CHAT;\nvar RESET_CHAT_DOM = \"reset_chat_dom\";\nexports.RESET_CHAT_DOM = RESET_CHAT_DOM;\nvar SET_CHANNELS = \"set_channels\";\nexports.SET_CHANNELS = SET_CHANNELS;\nvar REMOVE_CHANNEL = \"remove_channel\";\nexports.REMOVE_CHANNEL = REMOVE_CHANNEL;\nvar ADD_CHANNEL = \"add_channel\";\nexports.ADD_CHANNEL = ADD_CHANNEL;\nvar SHOW_MAIN = \"showMain\";\nexports.SHOW_MAIN = SHOW_MAIN;\nvar HIDE_MAIN = \"hideMain\";\nexports.HIDE_MAIN = HIDE_MAIN;\nvar SHOW_LOGIN = \"showLogin\";\nexports.SHOW_LOGIN = SHOW_LOGIN;\nvar HIDE_LOGIN = \"hideLogin\";\nexports.HIDE_LOGIN = HIDE_LOGIN;\nvar SHOW_REGISTER = \"showRegister\";\nexports.SHOW_REGISTER = SHOW_REGISTER;\nvar HIDE_REGISTER = \"hideRegister\";\nexports.HIDE_REGISTER = HIDE_REGISTER;\n\n\n//# sourceURL=webpack:///./ui/ts/events.ts?");

/***/ }),

/***/ "./ui/ts/login.ts":
/*!************************!*\
  !*** ./ui/ts/login.ts ***!
  \************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar config_1 = __webpack_require__(/*! ./config */ \"./ui/ts/config.ts\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nvar elements_1 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar utils_2 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nelements_1.loginButton.addEventListener(\"click\", onLogin);\nelements_1.registerBtn.addEventListener(\"click\", onRegister);\n(0, bus_1.subscribeToEvent)(\"DOMContentLoaded\", onDomContentLoaded);\nwindow.onload = function () {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log(\"onload\");\n                    return [4 /*yield*/, startLoginFlow()];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n};\n(0, bus_1.subscribeToEvent)(\"showLogin\", onShowLogin);\n(0, bus_1.subscribeToEvent)(\"hideLogin\", onHideLogin);\nfunction onDomContentLoaded() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log(\"ondomcontentloaded\");\n                    return [4 /*yield*/, startLoginFlow()];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction startLoginFlow() {\n    return __awaiter(this, void 0, void 0, function () {\n        var user;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log(\"start login flow\");\n                    user = (0, utils_1.getItemFromStorage)(\"user\");\n                    if (!user) {\n                        (0, bus_1.publishEvent)(\"showLogin\", {});\n                        return [2 /*return*/];\n                    }\n                    return [4 /*yield*/, tryLoginAsync(user)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction onShowLogin(ev) {\n    (0, utils_2.showElement)(\"loginModal\");\n}\nfunction onHideLogin(ev) {\n    (0, utils_2.hideElement)(\"loginModal\");\n}\nfunction tryLoginAsync(user) {\n    return __awaiter(this, void 0, void 0, function () {\n        var userResult, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log(\"try login\");\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    console.log(user.id);\n                    return [4 /*yield*/, getUserByIdAsync(user.id)];\n                case 2:\n                    userResult = _a.sent();\n                    if (userResult) {\n                        (0, bus_1.publishEvent)(\"showMain\", {});\n                        return [2 /*return*/];\n                    }\n                    console.log(\"Could not log in with the user \");\n                    (0, bus_1.publishEvent)(\"showLogin\", {});\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    console.log(\"Error at try login\");\n                    (0, bus_1.publishEvent)(\"showLogin\", {});\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction onLogin() {\n    return __awaiter(this, void 0, void 0, function () {\n        var loginResult;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, loginAsync()];\n                case 1:\n                    loginResult = _a.sent();\n                    if (loginResult != true) {\n                        showLoginErrorMessage(loginResult.message);\n                        return [2 /*return*/];\n                    }\n                    console.log(\"\\nLogin succesfull for \".concat(localStorage.user, \"\\n\"));\n                    (0, bus_1.publishEvent)(\"hideLogin\", {});\n                    (0, bus_1.publishEvent)(\"showMain\", {});\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction loginAsync() {\n    return __awaiter(this, void 0, void 0, function () {\n        var user, error_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, getUserByEmailAsync()];\n                case 1:\n                    user = _a.sent();\n                    console.log(user);\n                    localStorage.setItem(\"user\", JSON.stringify(user));\n                    return [2 /*return*/, true];\n                case 2:\n                    error_2 = _a.sent();\n                    return [2 /*return*/, error_2];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction onRegister() {\n    clearLoginErrorMessage();\n    (0, bus_1.publishEvent)(\"hideLogin\", {});\n    (0, bus_1.publishEvent)(\"showRegister\", {});\n}\nfunction getUserByIdAsync(Id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var url, result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    url = \"\".concat(config_1.default.baseHttpUrl, \"/get-user?id=\").concat(Id);\n                    return [4 /*yield*/, (0, utils_1.getDataAsync)(url)];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction getUserByEmailAsync() {\n    return __awaiter(this, void 0, void 0, function () {\n        var email, password, url, result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    email = elements_1.emailLoginBox.value;\n                    password = elements_1.passwordLoginBox.value;\n                    url = \"\".concat(config_1.default.baseHttpUrl, \"/get-user-by-email?email=\").concat(email, \"&password=\").concat(password);\n                    return [4 /*yield*/, (0, utils_1.getDataAsync)(url)];\n                case 1:\n                    result = _a.sent();\n                    console.log(result);\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction clearLoginErrorMessage() {\n    elements_1.loginFailMessage.innerHTML = '';\n    elements_1.loginFailMessage.style.display = \"none\";\n}\nfunction showLoginErrorMessage(message) {\n    console.log(\"Inside show login error message\");\n    elements_1.loginFailMessage.innerHTML = \"Could not login. Reason:\".concat(message);\n    elements_1.loginFailMessage.style.display = \"block\";\n}\n\n\n//# sourceURL=webpack:///./ui/ts/login.ts?");

/***/ }),

/***/ "./ui/ts/main.ts":
/*!***********************!*\
  !*** ./ui/ts/main.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nvar sock_1 = __webpack_require__(/*! ./sock */ \"./ui/ts/sock.ts\");\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\nvar connectBtn = document.getElementById(\"connectBtn\");\nvar disconnectBtn = document.getElementById(\"disconnectBtn\");\nvar logoutBtn = document.getElementById(\"logoutBtn\");\n(0, bus_1.subscribeToEvent)(events_1.SHOW_MAIN, onShowMain);\n(0, bus_1.subscribeToEvent)(events_1.HIDE_MAIN, onHideMain);\n(0, bus_1.subscribeToEvent)(\"connect\", onConnect);\n(0, bus_1.subscribeToEvent)(\"socketEvent\", onSocketEvent);\nconnectBtn.addEventListener(\"click\", btnConnect);\ndisconnectBtn.addEventListener(\"click\", onDisconnect);\nlogoutBtn.addEventListener(\"click\", onLogout);\nfunction onShowMain(e) {\n    (0, utils_1.showElement)(\"mainModal\");\n    (0, bus_1.publishEvent)(\"connect\", {});\n}\nfunction onHideMain(e) {\n    (0, utils_1.hideElement)(\"mainModal\");\n}\nfunction onConnect(e) {\n    (0, sock_1.connect)();\n}\nfunction onSocketEvent() {\n}\nfunction onDisconnect() {\n}\nfunction onLogout() {\n    console.log(\"On logout\");\n    (0, bus_1.publishEvent)(\"close_socket\", {});\n    localStorage.removeItem(\"user\");\n    (0, bus_1.publishEvent)(events_1.HIDE_MAIN, {});\n    (0, bus_1.publishEvent)(events_1.SHOW_LOGIN, {});\n}\nfunction btnConnect() {\n}\n\n\n//# sourceURL=webpack:///./ui/ts/main.ts?");

/***/ }),

/***/ "./ui/ts/message.ts":
/*!**************************!*\
  !*** ./ui/ts/message.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\n(0, bus_1.subscribeToEvent)(\"new_message\", onNewChatMessage);\nfunction onNewChatMessage(ev) {\n    var currentChannel = (0, utils_1.getItemFromStorage)(constants_1.CURRENT_CHANNEL);\n    var newMessageChannelId = ev.detail.topic_id;\n    if (newMessageChannelId == currentChannel) {\n        (0, bus_1.publishEvent)(\"new_chat_message\", ev.detail);\n    }\n    else {\n        (0, bus_1.publishEvent)(\"new_channel_message\", ev.detail);\n    }\n}\n\n\n//# sourceURL=webpack:///./ui/ts/message.ts?");

/***/ }),

/***/ "./ui/ts/register.ts":
/*!***************************!*\
  !*** ./ui/ts/register.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar config_1 = __webpack_require__(/*! ./config */ \"./ui/ts/config.ts\");\nvar elements_1 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nvar elements_2 = __webpack_require__(/*! ./elements */ \"./ui/ts/elements.ts\");\nvar utils_2 = __webpack_require__(/*! ./utils */ \"./ui/ts/utils.ts\");\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\n(0, bus_1.subscribeToEvent)(events_1.SHOW_REGISTER, onShowRegister);\n(0, bus_1.subscribeToEvent)(events_1.HIDE_REGISTER, onHideRegister);\nelements_2.submitBtn.addEventListener(\"click\", onSubmit);\nelements_2.backToLoginBtn.addEventListener(\"click\", onBackToLogin);\nfunction onShowRegister(_) {\n    console.log(\"called register\");\n    (0, utils_2.showElement)(\"registerModal\");\n}\nfunction onHideRegister(ev) {\n    cleanSubmitFailMessage();\n    (0, utils_2.hideElement)(\"registerModal\");\n}\nfunction cleanSubmitFailMessage() {\n    elements_2.registerFailMessage.innerHTML = '';\n}\nfunction showSubmitFailMessage(message) {\n    elements_2.registerFailMessage.innerHTML = message;\n    (0, utils_2.showElement)(\"registerFailMessage\");\n}\nfunction onBackToLogin() {\n    (0, bus_1.publishEvent)(events_1.HIDE_REGISTER, {});\n    (0, bus_1.publishEvent)(events_1.SHOW_LOGIN, {});\n}\nfunction onSubmit() {\n    return __awaiter(this, void 0, void 0, function () {\n        var userData, validateResult, err, succesfulData, userResult, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log(\"onSubmit\");\n                    userData = getCreateUserData();\n                    console.log(\"User data for creating:\".concat(userData));\n                    validateResult = validateCreateUserData(userData);\n                    if (validateResult instanceof Error) {\n                        err = validateResult;\n                        showSubmitFailMessage(\"Invalid data having reason:\".concat(err.message));\n                        return [2 /*return*/];\n                    }\n                    succesfulData = validateResult;\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, createUserAsync(succesfulData)];\n                case 2:\n                    userResult = _a.sent();\n                    if (userResult.result == \"error\") {\n                        handleUserCreateError(new Error(userResult.result));\n                        return [2 /*return*/];\n                    }\n                    console.log(\"User created:\".concat(userResult));\n                    (0, utils_1.setItemInStorage)(constants_1.USER, userResult.result);\n                    (0, bus_1.publishEvent)(events_1.HIDE_REGISTER, {});\n                    (0, bus_1.publishEvent)(events_1.SHOW_MAIN, {});\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    showSubmitFailMessage(error_1.message);\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction getCreateUserData() {\n    var userData = {\n        email: elements_1.emailBox.value,\n        password: elements_1.passwordBox.value,\n        retypePassword: elements_1.retypePasswordBox.value,\n        name: elements_1.usernameBox.value\n    };\n    return userData;\n}\nfunction validateCreateUserData(data) {\n    console.log(data);\n    if (data.name == undefined || data.name == null) {\n        return new Error(\"Invalid username\");\n    }\n    if (data.password == undefined || data.password == null) {\n        return new Error(\"Invalid password\");\n    }\n    if (data.password != data.retypePassword) {\n        return new Error(\"Passwords do not match\");\n    }\n    return data;\n}\nfunction createUserAsync(userData) {\n    return __awaiter(this, void 0, void 0, function () {\n        var url, result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    url = \"\".concat(config_1.default.baseHttpUrl, \"/create-user\");\n                    console.log(url);\n                    return [4 /*yield*/, (0, utils_1.postDataAsync)(url, userData)];\n                case 1:\n                    result = _a.sent();\n                    console.log(\"Result create user\\n:\");\n                    console.log(result);\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction handleUserCreateError(userResult) {\n    console.log(\"Inside handling user error \".concat(userResult));\n    elements_2.registerFailMessage.innerHTML = userResult.message;\n    return;\n}\n\n\n//# sourceURL=webpack:///./ui/ts/register.ts?");

/***/ }),

/***/ "./ui/ts/sock.ts":
/*!***********************!*\
  !*** ./ui/ts/sock.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.send = exports.connect = void 0;\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar config_1 = __webpack_require__(/*! ./config */ \"./ui/ts/config.ts\");\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./ui/ts/constants.ts\");\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\n(0, bus_1.subscribeToEvent)(\"close_socket\", onCloseSocketCommand);\n(0, bus_1.subscribeToEvent)(constants_1.SOCKET_COMMAND, onAsyncCommand);\nwindow.addEventListener(\"beforeunload\", onUnload);\nvar socket = null;\nfunction onCloseSocketCommand() {\n    if (socket) {\n        console.log(\"closing websocket\");\n        socket.close();\n    }\n}\nfunction onUnload() {\n    (0, bus_1.publishEvent)(\"close_socket\", {});\n}\nfunction get_url() {\n    var user = JSON.parse(localStorage.user);\n    var url = \"\".concat(config_1.default.baseWsUrl, \"/ws/id/\").concat(user.id);\n    console.log(\"Url:\" + url);\n    return url;\n}\nfunction send() {\n}\nexports.send = send;\nfunction connect() {\n    var url = get_url();\n    console.log(\"\\nAttempting connect to:\" + url + \"\\n\");\n    socket = new WebSocket(url);\n    socket.onopen = function (e) {\n        console.log(\"\\nConnection established\\n\");\n        command_get_subscriptions();\n    };\n    socket.onmessage = function (ev) {\n        if (ev.data == \"ping\") {\n            console.log(\"\\nReceived ping\");\n            socket.send(\"pong\");\n        }\n        var message = JSON.parse(ev.data);\n        console.log(\"\\nReceived on socket: \");\n        console.log(message);\n        (0, bus_1.publishEvent)(events_1.SOCKET_RECEIVE, message);\n    };\n    socket.onclose = function (e) {\n        console.log(\"Socket closed with code: \".concat(e.code, \" , reason: \").concat(e.reason));\n        (0, bus_1.publishEvent)(events_1.SOCKET_CLOSED, {});\n    };\n}\nexports.connect = connect;\nfunction onDomContentLoaded() {\n}\nfunction onAsyncCommand(ev) {\n    var data = ev.detail;\n    onCommand(data);\n}\nfunction onCommand(data) {\n    console.log(data);\n    console.log(\"\\nSending [\".concat(data.kind, \"] command : \").concat(data, \" to socket\\n\"));\n    switch (data.kind) {\n        case events_1.SUBSCRIBE_COMMAND:\n            if (isSubscribeCommand(data))\n                command_subscribe(data.topic);\n            break;\n        case events_1.UNSUBSCRIBE_COMMAND:\n            if (isUnsubscribeCommand(data))\n                command_unsubscribe(data.topicId);\n            break;\n        case events_1.REFRESH_CHANNELS_COMMAND:\n            if (isRefreshChannelsCommand(data))\n                command_get_subscriptions();\n            break;\n        case events_1.PUBLISH_MESSAGE:\n            if (isPublishMessage(data))\n                command_publish(data);\n            break;\n        case \"disconnect\":\n            if (isDisconnectCommand(data))\n                command_disconnect();\n            break;\n        case events_1.GET_NEWEST_MESSAGES:\n            if (isGetNewestMessagesCommand(data)) {\n                var cmd = data;\n                command_get_newest_messages(cmd);\n            }\n            break;\n        case events_1.GET_OLDER_MESSAGES:\n            if (isGetOlderMessagesCommand(data)) {\n                var command = data;\n                command_get_older_messages(command);\n            }\n            break;\n    }\n}\nfunction command_subscribe(topic) {\n    console.log(\"inside command sub\");\n    console.log(topic);\n    var message = {\n        \"command\": events_1.SUBSCRIBE_COMMAND,\n        \"topic\": topic\n    };\n    console.log(\"\\nSending:\" + JSON.stringify(message));\n    console.log(socket);\n    socket.send(JSON.stringify(message));\n}\nfunction command_unsubscribe(topicId) {\n    console.log(topicId);\n    var message = {\n        \"command\": events_1.UNSUBSCRIBE_COMMAND,\n        \"topicId\": topicId\n    };\n    console.log(\"\\nSending:\" + JSON.stringify(message));\n    socket.send(JSON.stringify(message));\n}\nfunction command_get_subscriptions() {\n    var message = {\n        \"command\": events_1.REFRESH_CHANNELS_COMMAND\n    };\n    console.log(\"\\nSending:\" + JSON.stringify(message));\n    socket.send(JSON.stringify(message));\n}\nfunction command_disconnect() {\n    (0, bus_1.publishEvent)(\"close_socket\", {});\n}\nfunction command_publish(command) {\n    console.log(command.topicId);\n    var toSend = {\n        \"command\": events_1.PUBLISH_MESSAGE,\n        \"topicId\": command.topicId,\n        \"content\": command.message\n    };\n    console.log(\"\\nSending:\" + JSON.stringify(toSend));\n    socket.send(JSON.stringify(toSend));\n}\nfunction command_get_newest_messages(command) {\n    var message = {\n        \"command\": events_1.GET_NEWEST_MESSAGES,\n        \"topicId\": command.topicId,\n        \"count\": command.count,\n    };\n    console.log(message);\n    socket.send(JSON.stringify(message));\n}\nfunction command_get_older_messages(command) {\n    var message = {\n        \"command\": events_1.GET_OLDER_MESSAGES,\n        \"topicId\": command.topicId,\n        \"startIndex\": command.startIndex,\n        \"count\": command.count,\n    };\n    console.log(message);\n    socket.send(JSON.stringify(message));\n}\nfunction isSubscribeCommand(command) {\n    return command.kind === \"subscribe\";\n}\nfunction isUnsubscribeCommand(command) {\n    return command.kind === \"unsubscribe\";\n}\nfunction isRefreshChannelsCommand(command) {\n    return command.kind === \"refresh_channels\";\n}\nfunction isPublishMessage(command) {\n    return command.kind === \"publish\";\n}\nfunction isDisconnectCommand(command) {\n    return command.kind === \"disconnect\";\n}\nfunction isGetNewestMessagesCommand(command) {\n    return command.kind === \"get_newest_messages\";\n}\nfunction isGetOlderMessagesCommand(command) {\n    return command.kind === \"get_older_messages\";\n}\n\n\n//# sourceURL=webpack:///./ui/ts/sock.ts?");

/***/ }),

/***/ "./ui/ts/sockReceive.ts":
/*!******************************!*\
  !*** ./ui/ts/sockReceive.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar bus_1 = __webpack_require__(/*! ./bus */ \"./ui/ts/bus.ts\");\nvar events_1 = __webpack_require__(/*! ./events */ \"./ui/ts/events.ts\");\n(0, bus_1.subscribeToEvent)(events_1.SOCKET_RECEIVE, onSocketReceive);\nfunction onSocketReceive(ev) {\n    var data = ev.detail;\n    if (data.kind == \"chat\") {\n        handle_chat_message(data);\n        return;\n    }\n    if (data.kind == \"command_result\") {\n        handle_command_result(data);\n        return;\n    }\n    if (data.kind = \"user_event\") {\n        console.log(\"Received user event\");\n        console.log(data);\n    }\n}\nfunction onNewChatMessage(data) {\n}\nfunction handle_chat_message(data) {\n    console.log(\"New Message !!!\");\n    console.log(data.detail);\n    (0, bus_1.publishEvent)(events_1.NEW_INCOMING_MESSAGE, data.detail);\n}\nfunction handle_command_result(data) {\n    if (data.command == events_1.SUBSCRIBE_COMMAND) {\n        callback_subscribe(data);\n    }\n    if (data.command == events_1.UNSUBSCRIBE_COMMAND) {\n        callback_unsubscribe(data);\n    }\n    if (data.command == events_1.REFRESH_CHANNELS_COMMAND) {\n        console.log(data);\n        (0, bus_1.publishEvent)(events_1.REFRESH_CHANNELS_COMMAND_RESULT, data.result);\n    }\n    if (data.command == events_1.GET_NEWEST_MESSAGES) {\n        callback_get_newest_messages(data);\n    }\n    if (data.command == events_1.GET_OLDER_MESSAGES) {\n        callback_get_older_messages(data);\n    }\n}\nfunction handle_user_event(data) {\n    if (data.user_event_kind == events_1.SUBSCRIBE_COMMAND) {\n        handle_user_event_subscribe(data);\n    }\n    if (data.user_event_kind == events_1.UNSUBSCRIBE_COMMAND) {\n        handle_user_event_unsubscribe(data);\n    }\n}\nfunction handle_user_event_subscribe(data) {\n    console.log(\"Publishing update channels\");\n    (0, bus_1.publishEvent)(events_1.SUBSCRIBE_COMMAND_RESULT_U, data);\n}\nfunction handle_user_event_unsubscribe(data) {\n    console.log(\"Publishing update channels\");\n    (0, bus_1.publishEvent)(events_1.UNSUBSCRIBE_COMMAND_RESULT_U, data);\n}\nfunction callback_subscribe(data) {\n    console.log(data);\n    (0, bus_1.publishEvent)(events_1.SUBSCRIBE_COMMAND_RESULT, data);\n}\nfunction callback_unsubscribe(data) {\n    console.log(data);\n    if (data.result == \"ok\") {\n        (0, bus_1.publishEvent)(events_1.UNSUBSCRIBE_COMMAND_RESULT, data);\n        (0, bus_1.publishEvent)(events_1.RESET_CHAT, {});\n    }\n}\nfunction callback_get_newest_messages(data) {\n    (0, bus_1.publishEvent)(\"getNewestMessages\", data.result);\n    console.log(data.messages);\n}\nfunction callback_get_older_messages(data) {\n    (0, bus_1.publishEvent)(\"getOlderMessages\", data.result);\n}\n\n\n//# sourceURL=webpack:///./ui/ts/sockReceive.ts?");

/***/ }),

/***/ "./ui/ts/utils.ts":
/*!************************!*\
  !*** ./ui/ts/utils.ts ***!
  \************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.setItemInStorage = exports.getItemFromStorage = exports.getDataAsync = exports.postDataAsync = exports.hideElement = exports.showElement = void 0;\nfunction showElement(elementId) {\n    var element = document.getElementById(elementId);\n    if (element) {\n        element.style.display = \"block\";\n    }\n}\nexports.showElement = showElement;\nfunction hideElement(elementId) {\n    var element = document.getElementById(elementId);\n    if (element) {\n        element.style.display = \"none\";\n    }\n}\nexports.hideElement = hideElement;\nfunction postDataAsync() {\n    return __awaiter(this, arguments, void 0, function (url, data) {\n        var myHeaders, d, requestOptions, response, error_1;\n        if (url === void 0) { url = \"\"; }\n        if (data === void 0) { data = {}; }\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    myHeaders = new Headers();\n                    myHeaders.append(\"Content-Type\", \"application/json\");\n                    d = JSON.stringify(data);\n                    requestOptions = {\n                        credentials: \"same-origin\",\n                        method: 'POST',\n                        headers: myHeaders,\n                        body: d,\n                        redirect: 'follow'\n                    };\n                    return [4 /*yield*/, fetch(url, requestOptions)];\n                case 1:\n                    response = _a.sent();\n                    if (response.status == 409) {\n                        return [2 /*return*/, { result: \"error\", reason: \"user_already_exists\" }];\n                    }\n                    return [2 /*return*/, response.json()];\n                case 2:\n                    error_1 = _a.sent();\n                    console.error(error_1);\n                    return [3 /*break*/, 3];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.postDataAsync = postDataAsync;\nfunction getDataAsync() {\n    return __awaiter(this, arguments, void 0, function (url) {\n        var response;\n        if (url === void 0) { url = \"\"; }\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log(url);\n                    return [4 /*yield*/, fetch(url, {\n                            method: \"GET\", // *GET, POST, PUT, DELETE, etc.\n                            //   mode: \"no-cors\", // no-cors, *cors, same-origin\n                            cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n                            credentials: \"same-origin\", // include, *same-origin, omit\n                            redirect: \"follow\", // manual, *follow, error\n                            referrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n                        })];\n                case 1:\n                    response = _a.sent();\n                    console.log(response);\n                    return [2 /*return*/, response.json()];\n            }\n        });\n    });\n}\nexports.getDataAsync = getDataAsync;\nfunction getItemFromStorage(Key) {\n    var item = localStorage.getItem(Key);\n    console.log(item);\n    if (item == null || item == \"undefined\") {\n        return null;\n    }\n    return JSON.parse(item);\n}\nexports.getItemFromStorage = getItemFromStorage;\nfunction setItemInStorage(Key, Value) { localStorage.setItem(Key, JSON.stringify(Value)); }\nexports.setItemInStorage = setItemInStorage;\n\n\n//# sourceURL=webpack:///./ui/ts/utils.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./ui/ts/app.ts");
/******/ 	
/******/ })()
;